---
import Section from '@components/accordion/AccordionSection.astro';

import Layout from '@layout/Layout.astro';
import Hero from '@components/hero/Hero.astro';
import WithBottom from '@components/spaces/WithBottom.astro';
import BannerItem1 from "@components/banner/BannerItem1.astro";

import BlockOfetas from '@content/home/BlockOfetas/BlockOfetas.astro';
import BlockSlotsList from '@content/home/BlockSlotsList/BlockSlotsList.astro';
import BlockConciseFormat from '@content/home/BlockConciseFormat/BlockConciseFormat.astro';
import BlockCasinoInfo from '@content/home/BlockCasinoInfo/BlockCasinoInfo.astro';
import BlockBonus from '@content/home/BlockBonus/BlockBonus.astro';
import BlockBonus2 from '@content/home/BlockBonus2/BlockBonus2.astro';
import BlockCasinoInfo2 from '@content/home/BlockCasinoInfo2/BlockCasinoInfo2.astro';
import BlockCasinoProviders from '@content/home/BlockCasinoProviders/BlockCasinoProviders.astro';
import BlockList from '@content/home/BlockList/BlockList.astro';
import BlockSuporte from '@content/home/BlockSuporte/BlockSuporte.astro';
import BlockInfo2 from '@content/home/BlockInfo2/BlockInfo2.astro';
import BlockInfo3 from '@content/home/BlockInfo3/BlockInfo3.astro';

import {fetchApi, endpoints} from '@api/index';
import AccordionContainer from '@components/accordion/AccordionContainer.astro';

const pageHomeSchema = await fetchApi({
    endpoint: endpoints.home,
});
const pageAttributes = pageHomeSchema['data']?.attributes;

const dataHero = pageAttributes?.hero;
const dataOfferSlider = pageAttributes?.offerSlider;
const dataSlotsList = pageAttributes?.slotsList;
const articleAnalises = pageAttributes?.analisesArticle;
const slider2 = pageAttributes?.slider2;
const bonuses = pageAttributes?.bonusSlider;
const bonusDescription = pageAttributes?.bonusDescription;
const promotions = pageAttributes?.promotions;
const guide = pageAttributes?.guide;
const payment = pageAttributes?.payment;
const availablegames = pageAttributes?.availablegames;
const appadvantages = pageAttributes?.appadvantages;
const banner = pageAttributes?.banner;
const strategies = pageAttributes?.strategies;
const support = pageAttributes?.support;
const infoSection = pageAttributes?.infoSection;
const faqData = pageAttributes?.faqBlock;
const dataSeo = pageAttributes?.seo;
const debug = false;
---
<Layout seo={dataSeo} heroPreload={dataHero}>
    <WithBottom>
        <Hero
            data={dataHero}
            mobileTopSpace="-mt-[25px]"
        />
    </WithBottom>

    <!-- Only render if dataOfferSlider has data (Conditional Rendering) -->
    {dataOfferSlider && (
        <div class="block sm:hidden">
            <!-- Lazy loading would be implemented here if applicable -->
            <BlockOfetas data={dataOfferSlider} />
        </div>
    )}

    <!-- The rest of your components defaulted to being shown as usual -->
    <BlockSlotsList data={dataSlotsList} />

    <BlockConciseFormat data={articleAnalises} />

    <WithBottom>
        <BlockCasinoInfo data={slider2} />
    </WithBottom>

    <!-- Only render if bonuses has data -->
    {bonuses && (
        <BlockBonus data={bonuses} bonusDescription={bonusDescription} />
    )}

    <!-- Only render if promotions has data -->
    {promotions && (
        <BlockBonus2 data={promotions} />
    )}

    <WithBottom>
        <BlockCasinoInfo2 data={guide} />
    </WithBottom>

    <WithBottom>
        <BlockCasinoProviders data={payment} />
    </WithBottom>

    <WithBottom>
        <BlockList data={availablegames} />
    </WithBottom>

    <WithBottom>
        <BlockInfo2 data={appadvantages} />
    </WithBottom>

    <!-- Only render if banner has data. Similar conditional check can be applied as needed -->
    {banner && (
        <div class="mb-[32px]">
            <BannerItem1 data={banner} />
        </div>
    )}

    <BlockInfo3 data={strategies} />

    <div class="mb-[32px]">
        <BlockSuporte data={support} />
    </div>

    <WithBottom>
        <Section data={infoSection} />
    </WithBottom>

    <!-- Only render if faqData has data -->
    {faqData && (
        <WithBottom>
            <AccordionContainer data={faqData} />
        </WithBottom>
    )}
</Layout>